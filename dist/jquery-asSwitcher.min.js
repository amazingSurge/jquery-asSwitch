/*! jquery asSwitcher - v0.1.1 - 2014-08-18
* https://github.com/amazingSurge/jquery-asSwitcher
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e=a.asSwitcher=function(b,c){this.$element=a(b).wrap("<div></div>"),this.$wrap=this.$element.parent();var d={disabled:this.$element.prop("disabled"),checked:this.$element.prop("checked")};this.options=a.extend({},e.defaults,c,d,this.$element.data()),this.namespace=this.options.namespace,this.classes={skin:this.namespace+"_"+this.options.skin,on:this.namespace+"_on",off:this.namespace+"_off",disabled:this.namespace+"_disabled"},this.$wrap.addClass(this.namespace),this.options.skin&&this.$wrap.addClass(this.classes.skin),this.checked=this.options.checked,this.disabled=this.options.disabled,this.initialized=!1,this._click=!0,this._trigger("init"),this.init()};e.prototype={constuctor:e,init:function(){var b=this.options;this.$inner=a('<div class="'+this.namespace+'-inner"></div>'),this.$innerBox=a('<div class="'+this.namespace+'-inner-box"></div>'),this.$on=a('<div class="'+this.namespace+'-on">'+b.onText+"</div>"),this.$off=a('<div class="'+this.namespace+'-off">'+b.offText+"</div>"),this.$handle=a('<div class="'+this.namespace+'-handle"></div>'),this.$innerBox.append(this.$on,this.$off),this.$inner.append(this.$innerBox),this.$wrap.append(this.$inner,this.$handle);var c=this.$on.width(),d=this.$handle.width();this.distance=c-d/2,this.options.clickable===!0&&this.$wrap.on("click.asSwitcher touchstart.asSwitcher",a.proxy(this.click,this)),this.options.dragable===!0&&(this.$handle.on("mousedown.asSwitcher touchstart.asSwitcher",a.proxy(this.mousedown,this)),this.$handle.on("click.asSwitcher",function(){return!1})),this.set(this.checked,!1),this.initialized=!0,this._trigger("ready"),this.disabled&&this.disable()},_trigger:function(a){var b,c=arguments.length>1?Array.prototype.slice.call(arguments,1):d;c?(b=c,b.push(this)):b=this,this.$element.trigger("asSwitcher::"+a,b),this.$element.trigger(a+".asSwitcher",b),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var e="on"+a;"function"==typeof this.options[e]&&this.options[e].apply(this,c)},animate:function(a,b){return this.initialized===!1?(this.$innerBox.css({marginLeft:a}),this.$handle.css({left:this.distance+a}),"function"==typeof b&&b(),!1):(this.$innerBox.stop().animate({marginLeft:a},{duration:this.options.animation,complete:b}),void this.$handle.stop().animate({left:this.distance+a},{duration:this.options.animation}))},getDragPos:function(a){return a.pageX||(a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageX:0)},move:function(a){a=Math.max(-this.distance,Math.min(a,0)),this.$innerBox.css({marginLeft:a}),this.$handle.css({left:this.distance+a})},click:function(){if(!this._click)return this._click=!0,!1;if(!this.disabled)return this.set(this.checked?!1:!0),!1},mousedown:function(c){var d,e=this,f=this.getDragPos(c);if(!this.disabled)return this.mousemove=function(a){var b=this.getDragPos(a);return d=this.checked?b-f>0?0:b-f<-this.distance?-this.distance:b-f:0>b-f?-this.distance:b-f>this.distance?0:-this.distance+b-f,this.move(d),this.$handle.off("mouseup.asSwitcher"),!1},this.mouseup=function(){var c=parseInt(this.$innerBox.css("margin-left"),10);return Math.abs(c)>=this.distance/2&&this.set(!1),Math.abs(c)<this.distance/2&&this.set(!0),a(b).off(".asSwitcher"),this.$handle.off("mouseup.asSwitcher"),!1},a(b).on({"mousemove.asSwitcher":a.proxy(this.mousemove,this),"mouseup.asSwitcher":a.proxy(this.mouseup,this),"touchmove.asSwitcher":a.proxy(this.mousemove,this),"touchend.asSwitcher":a.proxy(this.mouseup,this)}),this.options.clickable&&this.$handle.one("mouseup.asSwitcher touchend.asSwitcher",function(){e.set(e.checked?!1:!0),a(b).off(".asSwitcher")}),!1},check:function(){return this.checked!==!0&&this.set(!0),this},uncheck:function(){return this.checked!==!1&&this.set(!1),this},set:function(a,b){var c=this;return this.checked=a,a===!0?this.animate(0,function(){c.$wrap.removeClass(c.classes.off).addClass(c.classes.on)}):this.animate(-this.distance,function(){c.$wrap.removeClass(c.classes.on).addClass(c.classes.off)}),b!==!1&&(this.$element.prop("checked",a),this.$element.trigger("change"),this._trigger("change",a,this.options.name,"asSwitcher")),this},get:function(){return this.$element.prop("checked")},val:function(a){return a?void this.set(a):this.get()},enable:function(){return this.disabled=!1,this.$element.prop("disabled",!1),this.$wrap.removeClass(this.classes.disabled),this},disable:function(){return this.disabled=!0,this.$element.prop("disabled",!0),this.$wrap.addClass(this.classes.disabled),this},destroy:function(){this.$wrap.off(".asSwitcher"),this.$handle.off(".asSwitcher")}},e.defaults={namespace:"asSwitcher",skin:null,dragable:!0,clickable:!0,disabled:!1,onText:"ON",offText:"OFF",checked:!0,animation:200},a.fn.asSwitcher=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,"asSwitcher")||a.data(this,"asSwitcher",new e(this,b))});var c=b,f=arguments.length>1?Array.prototype.slice.call(arguments,1):d;if(/^\_/.test(c))return!1;if(!(/^(get)$/.test(c)||"val"===c&&f===d))return this.each(function(){var b=a.data(this,"asSwitcher");b&&"function"==typeof b[c]&&b[c].apply(b,f)});var g=this.first().data("asSwitcher");return g&&"function"==typeof g[c]?g[c].apply(g,f):void 0}}(jQuery,document,window);