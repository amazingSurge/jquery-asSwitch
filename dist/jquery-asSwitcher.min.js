/*! jquery asSwitcher - v0.1.0 - 2014-05-16
* https://github.com/amazingSurge/jquery-asSwitcher
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(t){"use strict";var i=t.asSwitcher=function(s,e){this.$element=t(s).wrap("<div></div>"),this.$parent=this.$element.parent();var n={disabled:this.$element.prop("disabled"),checked:this.$element.prop("checked")};this.name=this.$element.attr("name")?this.$element.attr("name"):e.name,this.options=t.extend({},i.defaults,e,n),this.namespace=this.options.namespace,this.classes={skin:this.namespace+"_"+this.options.skin,on:this.namespace+"_on",off:this.namespace+"_off",disabled:this.namespace+"_disabled"},this.$parent.addClass(this.namespace),this.options.skin&&this.$parent.addClass(this.classes.skin),this.checked=this.options.checked,this.disabled=this.options.disabled,this.initialized=!1,this._click=!0,this._trigger("init"),this.init()};i.prototype={constuctor:i,init:function(){var i=this.options;this.$inner=t('<div class="'+this.namespace+'-inner"></div>'),this.$innerBox=t('<div class="'+this.namespace+'-inner-box"></div>'),this.$on=t('<div class="'+this.namespace+'-on">'+i.onText+"</div>"),this.$off=t('<div class="'+this.namespace+'-off">'+i.offText+"</div>"),this.$handle=t('<div class="'+this.namespace+'-handle"></div>'),this.$innerBox.append(this.$on,this.$off),this.$inner.append(this.$innerBox),this.$parent.append(this.$inner,this.$handle);var s=this.$on.width(),e=this.$handle.width();this.distance=s-e/2,this.options.clickable===!0&&this.$parent.on("click.asSwitcher touchstart.asSwitcher",t.proxy(this.click,this)),this.options.dragable===!0&&(this.$handle.on("mousedown.asSwitcher touchstart.asSwitcher",t.proxy(this.mousedown,this)),this.$handle.on("click.asSwitcher",function(){return!1})),this.set(this.checked),this.initialized=!0,this._trigger("ready")},_trigger:function(t){this.$element.trigger("asSwitcher::"+t,this),this.$element.trigger(t+".asSwitcher",this),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var i="on"+t,s=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;"function"==typeof this.options[i]&&this.options[i].apply(this,s)},animate:function(t,i){return this.initialized===!1?(this.$innerBox.css({marginLeft:t}),this.$handle.css({left:this.distance+t}),"function"==typeof i&&i(),!1):(this.$innerBox.stop().animate({marginLeft:t},{duration:this.options.animation,complete:i}),this.$handle.stop().animate({left:this.distance+t},{duration:this.options.animation}),void 0)},getDragPos:function(t){return t.pageX||(t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageX:0)},move:function(t){t=Math.max(-this.distance,Math.min(t,0)),this.$innerBox.css({marginLeft:t}),this.$handle.css({left:this.distance+t})},click:function(){return this._click?(this.checked?this.set(!1):this.set(!0),!1):(this._click=!0,!1)},mousedown:function(i){var s,e=this,n=this.getDragPos(i);if(!this.disabled)return this.mousemove=function(t){var i=this.getDragPos(t);return s=this.checked?i-n>0?0:-this.distance>i-n?-this.distance:i-n:0>i-n?-this.distance:i-n>this.distance?0:-this.distance+i-n,this.move(s),this.$handle.off("mouseup.asSwitcher"),!1},this.mouseup=function(){var i=parseInt(this.$innerBox.css("margin-left"),10);return Math.abs(i)>=this.distance/2&&this.set(!1),Math.abs(i)<this.distance/2&&this.set(!0),t(document).off(".asSwitcher"),this.$handle.off("mouseup.asSwitcher"),!1},t(document).on({"mousemove.asSwitcher":t.proxy(this.mousemove,this),"mouseup.asSwitcher":t.proxy(this.mouseup,this),"touchmove.asSwitcher":t.proxy(this.mousemove,this),"touchend.asSwitcher":t.proxy(this.mouseup,this)}),this.options.clickable&&this.$handle.one("mouseup.asSwitcher touchend.asSwitcher",function(){e.checked?e.set(!1):e.set(!0),t(document).off(".asSwitcher")}),!1},check:function(){return this.set(!0),this},uncheck:function(){return this.set(!1),this},set:function(t){var i=this;if(!this.disabled){switch(t){case!0:this.checked=t,this.$element.prop("checked",!0),this.animate(0,function(){i.$parent.removeClass(i.classes.off).addClass(i.classes.on)});break;case!1:this.checked=t,this.$element.prop("checked",!1),this.animate(-this.distance,function(){i.$parent.removeClass(i.classes.on).addClass(i.classes.off)})}return this._trigger("change",this.checked),this}},get:function(){return this.$element.prop("checked")},val:function(t){return t?(this.set(t),void 0):this.get()},enable:function(){return this.disabled=!1,this.$element.prop("disabled",!1),this.$parent.removeClass(this.classes.disabled),this},disable:function(){return this.disabled=!0,this.$element.prop("disabled",!0),this.$parent.addClass(this.disbaled),this},destroy:function(){this.$parent.off(".asSwitcher"),this.$handle.off(".asSwitcher")}},i.defaults={namespace:"asSwitcher",skin:null,name:null,dragable:!0,clickable:!0,disabled:!1,onText:"ON",offText:"OFF",checked:!0,animation:200},t.fn.asSwitcher=function(s){if("string"!=typeof s)return this.each(function(){t.data(this,"asSwitcher")||t.data(this,"asSwitcher",new i(this,s))});var e=s,n=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;if(!/^(get)$/.test(e))return this.each(function(){var i=t.data(this,"asSwitcher");i&&"function"==typeof i[e]&&i[e].apply(i,n)});var a=this.first().data("asSwitcher");return a&&"function"==typeof a[e]?a[e].apply(a,n):void 0}})(jQuery);